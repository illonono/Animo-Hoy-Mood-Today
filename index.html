<!DOCTYPE html>
<html lang="es">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GYSHZCXK38"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GYSHZCXK38');
</script>
  
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ánimo Hoy - Mood Today</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IM+Fell+English&display=swap" rel="stylesheet">

  <!-- Estilos -->
  <link rel="stylesheet" href="style.css">

  <!-- html2canvas para capturas -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <style>
    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background-color: rgba(0, 0, 0, 0.75);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 999;
    }
    .modal.hidden {
      display: none;
    }
    .modal-content {
      background: #fefefe;
      padding: 2rem;
      border-radius: 1rem;
      text-align: center;
      font-family: 'IM Fell English', serif;
      width: 300px;
      box-shadow: 0 0 20px #000;
    }
    .modal-content h2 {
      margin-bottom: 1rem;
      color: #333;
    }
    .share-chart {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    .share-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: bold;
      color: #333;
    }
    .share-bar-fill {
      height: 1rem;
      border-radius: 0.5rem;
      flex-grow: 1;
      margin-left: 0.5rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>Ánimo Hoy - Mood Today</h1>
    <h2>Descubre tus matices de ánimo hoy dependiendo de dónde vives</h2>
    <div class="selector">
      <select id="citySelector">
        <option disabled selected>¿De dónde eres?</option>
        <option value="kabul">Kabul (Afganistán)</option>
        <option value="tirana">Tirana (Albania)</option>
        <option value="argel">Argel (Argelia)</option>
        <option value="andorra-la-vieja">Andorra la Vieja (Andorra)</option>
        <option value="luanda">Luanda (Angola)</option>
        <option value="saint-johns">Saint John's (Antigua y Barbuda)</option>
        <option value="buenos-aires">Buenos Aires (Argentina)</option>
        <option value="erevan">Ereván (Armenia)</option>
        <option value="canberra">Canberra (Australia)</option>
        <option value="viena">Viena (Austria)</option>
        <option value="baku">Bakú (Azerbaiyán)</option>
        <option value="nassau">Nassau (Bahamas)</option>
        <option value="manama">Manama (Baréin)</option>
        <option value="dhaka">Dhaka (Bangladés)</option>
        <option value="bridgetown">Bridgetown (Barbados)</option>
        <option value="minsk">Minsk (Bielorrusia)</option>
        <option value="bruselas">Bruselas (Bélgica)</option>
        <option value="belmopan">Belmopán (Belice)</option>
        <option value="porto-novo">Porto Novo (Benín)</option>
        <option value="thimphu">Thimphu (Bután)</option>
        <option value="la-paz">La Paz (Bolivia)</option>
        <option value="sarajevo">Sarajevo (Bosnia y Herzegovina)</option>
        <option value="gaborone">Gaborone (Botsuana)</option>
        <option value="brasilia">Brasilia (Brasil)</option>
        <option value="bandar-seri-begawan">Bandar Seri Begawan (Brunéi)</option>
        <option value="sofia">Sofía (Bulgaria)</option>
        <option value="ouagadougou">Uagadugú (Burkina Faso)</option>
        <option value="bujumbura">Bujumbura (Burundi)</option>
        <option value="praia">Praia (Cabo Verde)</option>
        <option value="phnom-penh">Phnom Penh (Camboya)</option>
        <option value="yaounde">Yaundé (Camerún)</option>
        <option value="ottawa">Ottawa (Canadá)</option>
        <option value="bangui">Bangui (República Centroafricana)</option>
        <option value="ndjamena">Ndjamena (Chad)</option>
        <option value="santiago">Santiago (Chile)</option>
        <option value="beijing">Beijing (China)</option>
        <option value="bogota">Bogotá (Colombia)</option>
        <option value="moroni">Moroni (Comoras)</option>
        <option value="brazzaville">Brazzaville (República del Congo)</option>
        <option value="kinshasa">Kinshasa (República Democrática del Congo)</option>
        <option value="san-jose">San José (Costa Rica)</option>
        <option value="zagreb">Zagreb (Croacia)</option>
        <option value="la-habana">La Habana (Cuba)</option>
        <option value="nicosia">Nicosia (Chipre)</option>
        <option value="praga">Praga (República Checa)</option>
        <option value="copenhague">Copenhague (Dinamarca)</option>
        <option value="djibouti">Djibouti (Yibuti)</option>
        <option value="roseau">Roseau (Dominica)</option>
        <option value="santo-domingo">Santo Domingo (República Dominicana)</option>
        <option value="quito">Quito (Ecuador)</option>
        <option value="el-cairo">El Cairo (Egipto)</option>
        <option value="san-salvador">San Salvador (El Salvador)</option>
        <option value="malabo">Malabo (Guinea Ecuatorial)</option>
        <option value="asmara">Asmara (Eritrea)</option>
        <option value="tallin">Tallin (Estonia)</option>
        <option value="mbabane">Mbabane (Esuatini)</option>
        <option value="addis-abeba">Adís Abeba (Etiopía)</option>
        <option value="helsinki">Helsinki (Finlandia)</option>
        <option value="paris">París (Francia)</option>
        <option value="libreville">Libreville (Gabón)</option>
        <option value="banjul">Banjul (Gambia)</option>
        <option value="tbilisi">Tiflis (Georgia)</option>
        <option value="berlin">Berlín (Alemania)</option>
        <option value="accra">Acra (Ghana)</option>
        <option value="athens">Atenas (Grecia)</option>
        <option value="saint-georges">Saint George’s (Granada)</option>
        <option value="ciudad-de-guatemala">Ciudad de Guatemala (Guatemala)</option>
        <option value="conakry">Conakri (Guinea)</option>
        <option value="bissau">Bisáu (Guinea-Bisáu)</option>
        <option value="bissau">Bisáu (Guinea-Bisáu)</option>
        <option value="yamoussoukro">Yamusukro (Costa de Marfil)</option>
        <option value="georgetown">Georgetown (Guyana)</option>
        <option value="port-au-prince">Puerto Príncipe (Haití)</option>
        <option value="tegucigalpa">Tegucigalpa (Honduras)</option>
        <option value="budapest">Budapest (Hungría)</option>
        <option value="reykjavik">Reikiavik (Islandia)</option>
        <option value="new-delhi">Nueva Delhi (India)</option>
        <option value="jakarta">Yakarta (Indonesia)</option>
        <option value="teheran">Teherán (Irán)</option>
        <option value="baghdad">Bagdad (Irak)</option>
        <option value="dublin">Dublín (Irlanda)</option>
        <option value="jerusalem">Jerusalén (Israel)</option>
        <option value="rome">Roma (Italia)</option>
        <option value="kingston">Kingston (Jamaica)</option>
        <option value="tokyo">Tokio (Japón)</option>
        <option value="amman">Amán (Jordania)</option>
        <option value="astana">Astaná (Kazajistán)</option>
        <option value="nairobi">Nairobi (Kenia)</option>
        <option value="tarawa">Tarawa (Kiribati)</option>
        <option value="pristina">Pristina (Kosovo)</option>
        <option value="kuwait">Kuwait (Kuwait)</option>
        <option value="bishkek">Biskek (Kirguistán)</option>
        <option value="vientiane">Vientián (Laos)</option>
        <option value="riga">Riga (Letonia)</option>
        <option value="beirut">Beirut (Líbano)</option>
        <option value="monrovia">Monrovia (Liberia)</option>
        <option value="tripoli">Trípoli (Libia)</option>
        <option value="vaduz">Vaduz (Liechtenstein)</option>
        <option value="vilnius">Vilna (Lituania)</option>
        <option value="luxembourg">Luxemburgo (Luxemburgo)</option>
        <option value="skopje">Skopie (Macedonia del Norte)</option>
        <option value="antananarivo">Antananarivo (Madagascar)</option>
        <option value="lilongwe">Lilongüe (Malaui)</option>
        <option value="kuala-lumpur">Kuala Lumpur (Malasia)</option>
        <option value="valletta">La Valeta (Malta)</option>
        <option value="nouakchott">Nuakchot (Mauritania)</option>
        <option value="port-louis">Port Louis (Mauricio)</option>
        <option value="mexico-city">Ciudad de México (México)</option>
        <option value="chisinau">Chisináu (Moldavia)</option>
        <option value="monaco">Mónaco (Mónaco)</option>
        <option value="ulan-bator">Ulán Bator (Mongolia)</option>
        <option value="podgorica">Podgorica (Montenegro)</option>
        <option value="maputo">Maputo (Mozambique)</option>
        <option value="windhoek">Windhoek (Namibia)</option>
        <option value="kathmandu">Katmandú (Nepal)</option>
        <option value="wellington">Wellington (Nueva Zelanda)</option>
        <option value="managua">Managua (Nicaragua)</option>
        <option value="niamey">Niamey (Níger)</option>
        <option value="abuja">Abuya (Nigeria)</option>
        <option value="oslo">Oslo (Noruega)</option>
        <option value="muscat">Mascate (Omán)</option>
        <option value="islamabad">Islamabad (Pakistán)</option>
        <option value="ngerulmud">Ngerulmud (Palaos)</option>
        <option value="panama-city">Ciudad de Panamá (Panamá)</option>
        <option value="port-moresby">Port Moresby (Papúa Nueva Guinea)</option>
        <option value="asuncion">Asunción (Paraguay)</option>
        <option value="lima">Lima (Perú)</option>
        <option value="manila">Manila (Filipinas)</option>
        <option value="warsaw">Varsovia (Polonia)</option>
        <option value="lisbon">Lisboa (Portugal)</option>
        <option value="bucharest">Bucarest (Rumanía)</option>
        <option value="madrid">Madrid (España)</option>
        <option value="london">Londres (Reino Unido)</option>
        <option value="kiev">Kiev (Ucrania)</option>
        <option value="moscow">Moscú (Rusia)</option>
        <option value="rabat">Rabat (Marruecos)</option>
        <option value="belgrade">Belgrado (Serbia)</option>
        <option value="victoria">Victoria (Seychelles)</option>
        <option value="singapore">Singapur (Singapur)</option>
        <option value="bratislava">Bratislava (Eslovaquia)</option>
        <option value="ljubljana">Liubliana (Eslovenia)</option>
        <option value="honirova">Honiara (Islas Salomón)</option>
        <option value="somoa">Apia (Samoa)</option>
        <option value="doha">Doha (Catar)</option>
        <option value="colombo">Colombo (Sri Lanka)</option>
        <option value="kigali">Kigali (Ruanda)</option>
        <option value="abu-dhabi">Abu Dabi (Emiratos Árabes Unidos)</option>
        <option value="sana">Saná (Yemen)</option>
        <option value="lusaka">Lusaka (Zambia)</option>
        <option value="harare">Harare (Zimbabue)</option>
      </select>
    </div>
  </header>

  <div class="main-content">
    <div class="mood-background"></div>

<div class="chart-grid">
  <!-- Input + label + barra (por cada emoción) -->
  <div class="item">
    <input type="radio" id="felicidad" name="layer" checked>
    <label for="felicidad">Felicidad</label>
    <div class="bar felicidad" data-value="0"><div class="bar-fill">0%</div></div>
  </div>
  
  <div class="item">
    <input type="radio" id="calma" name="layer">
    <label for="calma">Calma</label>
    <div class="bar calma" data-value="0"><div class="bar-fill">0%</div></div>
  </div>

  <div class="item">
    <input type="radio" id="motivacion" name="layer">
    <label for="motivacion">Motivación</label>
    <div class="bar motivacion" data-value="0"><div class="bar-fill">0%</div></div>
  </div>

  <div class="item">
    <input type="radio" id="estres" name="layer">
    <label for="estres">Estrés</label>
    <div class="bar estres" data-value="0"><div class="bar-fill">0%</div></div>
  </div>

  <div class="item">
    <input type="radio" id="ansiedad" name="layer">
    <label for="ansiedad">Ansiedad</label>
    <div class="bar ansiedad" data-value="0"><div class="bar-fill">0%</div></div>
  </div>

  <div class="item">
    <input type="radio" id="energia" name="layer">
    <label for="energia">Energía</label>
    <div class="bar energia" data-value="0"><div class="bar-fill">0%</div></div>
  </div>

  <div class="item">
    <input type="radio" id="concentracion" name="layer">
    <label for="concentracion">Concentración</label>
    <div class="bar concentracion" data-value="0"><div class="bar-fill">0%</div></div>
  </div>

  <div class="item">
    <input type="radio" id="creatividad" name="layer">
    <label for="creatividad">Creatividad</label>
    <div class="bar creatividad" data-value="0"><div class="bar-fill">0%</div></div>
  </div>
</div>

<!-- Botón -->
<button class="share-btn">Compartir mi estado</button>


  <!-- Modal para compartir -->
  <div id="share-modal" class="modal hidden">
    <div class="modal-content">
      <h2>Mi pronóstico emocional de hoy</h2>
      <div class="share-chart" id="shareChart"></div>
      <button onclick="downloadImage()">Descargar imagen</button>
      <button onclick="closeModal()">Cerrar</button>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    function getRandomBars(min = 30, max = 85) {
      return Array.from({ length: 8 }, () =>
        Math.floor(Math.random() * (max - min + 1)) + min
      );
    }

    document.getElementById('citySelector').addEventListener('change', e => {
      const randomBars = getRandomBars();
      document.querySelectorAll('.bar').forEach((bar, i) => {
        const v = randomBars[i];
        bar.setAttribute('data-value', v);
        const fill = bar.querySelector('.bar-fill');
        fill.style.height = v + '%';
        fill.textContent = v + '%';
      });
    });

    function openModal() {
      const chart = document.getElementById('shareChart');
      chart.innerHTML = '';

      document.querySelectorAll('.bar').forEach(bar => {
        const mood = bar.classList[1];
        const value = bar.getAttribute('data-value');
        const color = getComputedStyle(document.documentElement)
          .getPropertyValue('--c-' + mood);

        const wrapper = document.createElement('div');
        wrapper.className = 'share-bar';
        wrapper.innerHTML = `
          <span>${mood.charAt(0).toUpperCase() + mood.slice(1)}: ${value}%</span>
          <div class="share-bar-fill" style="width:${value}%; background:${color}"></div>
        `;
        chart.appendChild(wrapper);
      });

      document.getElementById('share-modal').classList.remove('hidden');
    }

    function closeModal() {
      document.getElementById('share-modal').classList.add('hidden');
    }

    function downloadImage() {
      html2canvas(document.querySelector('.modal-content')).then(canvas => {
        const link = document.createElement('a');
        link.download = 'estado-animo.png';
        link.href = canvas.toDataURL();
        link.click();
      });
    }

    // Ahora sí, asignamos el evento una vez el DOM está cargado
    window.addEventListener('DOMContentLoaded', () => {
      document.querySelector('.share-btn').addEventListener('click', openModal);
    });
  </script>
</body>
</html>
